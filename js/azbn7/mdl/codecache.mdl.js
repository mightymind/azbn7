!function(e){e.Azbn7&&!function(){var i=function(){var i=this;return i.name="codecache",i.uid="azbn7__mdl__codecache",i.__intervals={},i.config={expires_in:3600,update_or_expires:300},i.remove=function(i){e.Azbn7.ls.remove(i)},i.download=function(n,a,t){a=a||!1;var d=n.url;d.indexOf("http://")<0&&d.indexOf("https://")<0&&0!=d.indexOf("//")&&(d=e.Azbn7.config.path.root+d),e.ajax(n.url,{type:"GET",dataType:"text",success:function(d){var r={tag:n.tag,uid:n.uid,url:n.url,expires:e.Azbn7.now_sec()+(n.expires_in||i.config.expires_in),expires_in:n.expires_in,html:"<"+n.tag+">"+d+"</"+n.tag+">"};e.Azbn7.ls.obj2s(n.uid,r),e("."+i.uid+"[data-"+i.uid+'-uid="'+n.uid+'"]').attr("data-"+i.uid+"-expires-in",n.expires_in),a&&i.eval(r,!0,t)}})},i.doUpdate=function(n){n=n||6e4,i.__intervals.codecache=setInterval(function(){var n=e("."+i.uid);n.each(function(n){var a=e(this),t=a.attr("data-"+i.uid+"-uid")||"",d=e.Azbn7.ls.s2obj(t);if(d){var r=d.expires-e.Azbn7.now_sec();a.attr("data-"+i.uid+"-expires-in",r),r>0?r<i.config.update_or_expires&&i.download(d,!1):i.download(d,!1)}})},n)},i.eval=function(n,a,t){var d=e(n.html);d.attr("id",i.name+"-"+e.Azbn7.randstr()).attr("class",i.uid).attr("data-"+i.uid+"-expires-in",n.expires-e.Azbn7.now_sec()).attr("data-"+i.uid+"-uid",n.uid).attr("data-"+i.uid+"-from-url",a),t&&t(d)},i.load=function(n,a){var t=e.extend({},{tag:"!--",uid:"html.default",url:"",expires:e.Azbn7.now_sec()+(n.expires_in||i.config.expires_in),expires_in:3600,html:""},n);t.uid=i.name+"."+t.uid;var d=e.Azbn7.ls.s2obj(t.uid);d?(d.expires_in=t.expires_in,d.expires>e.Azbn7.now_sec()?i.eval(d,!1,a):i.download(t,!0,a)):i.download(t,!0,a)},i};e.Azbn7.load("CodeCache",new i)}()}(jQuery);